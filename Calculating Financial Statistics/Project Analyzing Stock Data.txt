INTRODUCTION TO PYTHON
Analyzing Stock Data
It’s time to put your Python skills and financial knowledge to the test!

You are given the monthly stock prices of two E-commerce companies, Amazon (AMZN) and eBay (EBAY). Help us analyze the risk and return for each investment! You will calculate the rates of return from this data, as well as other key statistics such as variance and correlation for assessing risk.

Let’s get started!

Tasks
0/10 Complete
Mark the tasks as complete by checking them off
Inspect Data and Code
1.
In script.py, you are provided with the monthly stock prices of Amazon (AMZN) and eBay (EBAY) over the course of a year (June 2018 to June 2019). You are also given a helper function that displays decimal values (such as 0.075) in percentage form (7.5%).

In utils.py, you will find functions for calculating the log rate of return, variance, standard deviation, and correlation coefficient. They are imported at the top of script.py.

Take a moment to familiarize yourself with these functions and proceed to the next step when you are ready!


Hint
The display_as_percentage() function takes a numerical value as input and returns a formatted string that displays the value in percentage form.

my_value = 0.075
print('The value formatted as a percentage is', display_as_percentage(my_value))

# Prints:
# The value formatted as a percentage is 7.5%
Calculate Rate of Return
2.
Let’s start by calculating the logarithmic rates of return from the stock prices. Define a function called get_returns() that takes a parameter called prices, which will be a list of stock prices.

The function will eventually return a list of log returns calculated from each adjacent pair of prices. For now, create a variable called returns inside the function body, and set it equal to an empty list.


Hint
A function can be defined with the following syntax:

def my_function(my_parameter):
    # code goes here
3.
Next, use a for loop to iterate over the prices list, from the 1st element to the 2nd to last.

You will be accessing the elements by their indices, so use the range() function to help generate the sequence of numbers to iterate over. Recall that Python uses zero-based indexing, meaning the index numbering of the list starts with 0 and ends with n - 1, where n is the number of elements in the list.


Hint
Use the built-in len() function to help find the number of elements in a list.

The syntax for iterating over a sequence of numbers generated by range() is:

for i in range(...):
    # code goes here
See this exercise on the range function for a review!

4.
As you iterate over each index i, the element in the prices list that is at position i will be the start price and the element with index i + 1 will be the end price. Use the calculate_log_return() function imported from utils.py to calculate the rate of return from the start and end prices. Then, append the rate of return to the returns list.

After your for loop, return returns from the get_returns() function.


Hint
Elements in a list can be accessed by index using square brackets:

for i in range(...):
    start_price = prices[i]
    end_price = prices[i + 1]

    # code goes here
5.
Use the get_returns() function to find the monthly log rates of return from the Amazon and eBay stock prices. Store those list of returns in the variables amazon_returns and ebay_returns, respectively.


Hint
The value returned from a function call can be stored in a variable using the syntax:

my_variable = my_function(...)
6.
Time to print out the lists of monthly returns! Since rates of return is often expressed as a percentage, use the display_as_percentage() function and list comprehension to display each value in amazon_returns and ebay_returns as a percentage.

How do the monthly returns of the two stocks compare? Are they on average profitable?


Hint
The syntax for calling a function on each element of a list using list comprehension is:

[my_function(item) for item in my_list]
For both stocks, there are more months where the rate of return is positive (indicating a profit) rather than negative (indicating a loss). Amazon has more profitable months than eBay.

7.
Now, let’s calculate the annual rate of return for each stock!

Recall that log returns can easily be aggregated over time. Since amazon_returns and ebay_returns contain the monthly log returns for all 12 months in the past year, the annual return is simply the sum of all monthly returns. Use the display_as_percentage() function to help format the annual return as a percentage when you print out the results.

How do the annual returns of the two stocks compare?


Hint
Use Python’s built-in sum() function to find the sum of all values in a list.

We can see that Amazon’s annual return is slightly higher than eBay’s annual return.

Assess Investment Risk
8.
Let’s move on to assessing the risk of each investment! Start by calculating the variance of each stock’s monthly returns. Use the calculate_variance() function imported at the top of script.py, and print out the results.

How do the variance for each stock compare? What does this tell you about their relative risk?


Hint
The variance for Amazon’s monthly returns is slightly higher than eBay’s. A greater variance generally signifies a riskier investment.

9.
Now, calculate the standard deviation of each stock’s monthly returns using the calculate_stddev() function, and print out the results.

Recall that the standard deviation has the same unit of measurement as the original dataset, or the monthly returns in this case. Since rates of return are often expressed as a percentage, use display_as_percentage() to help format the standard deviation for easier interpretation.


Hint
Amazon’s monthly returns have a greater standard deviation than eBay’s. As we’ve already seen previously, investing in Amazon stock is likely riskier.

It is worthwhile to note again that Amazon also has the higher rate of return. This demonstrates the risk-return tradeoff that often exists in investments.

10.
Finally, calculate the correlation between the stock returns using the calculate_correlation() function, and print out the results.

Are Amazon and eBay stock returns strongly or weakly correlated? Is the correlation positive or negative?


Hint
The correlation coefficient between Amazon and eBay stock returns is around 0.67, so there is a moderate positive correlation. Stocks from the same industry tend to have a positive correlation because they are affected by similar external conditions.

We should be careful about investing in highly correlated stocks to avoid putting all our eggs in one basket, so to speak. Instead, it is wise to invest in uncorrelated stocks, such that a loss in one does not automatically mean a loss in the other. This diversifies the investment portfolio and reduces overall risk.